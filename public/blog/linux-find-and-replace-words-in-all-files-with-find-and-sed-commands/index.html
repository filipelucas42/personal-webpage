<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="/new.css">
     <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161652863-2"></script>
     <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-161652863-2');
     </script>
	 <title>[Linux] Find and replace words in all files with find and sed commands</title>
</head>
<body>
     <head>
    <nav>
        <a href="/">Home</a>
        /
        <a href="/blog">Blog</a>
        /
         <a href="/about">About</a>
    </nav>
</head>
		 <h1 id="find-and-replace-words-in-all-files-with-find-and-sed-commands">Find and replace words in all files with find and sed commands</h1>
<p>Although is essential using an IDE for programming, I believe that we should not be completely attach to it. For simple operations, UNIX tools can be used to do a lot, programmers should see linux environments as an IDE by itself and use it more to manage projects.</p>
<p>In this article I am going to explain how to find and replace all word occurrences in all files inside a project folder structure using <code>find</code> and <code>sed</code> commands.</p>
<p>Just have in mind that before doing some modification do a backup or a commit, unlike IDE there&rsquo;s no undo command for this!</p>
<h2 id="find-command">find command</h2>
<p><code>find</code> command is used to list all files inside a folder:</p>
<pre><code>#usage
find &lt;path&gt; [args]

#example:

#list files from current directory
find .

#list files from home directory
find ~/

#list only regular files (excludes directories)
find . -type f

#ignore files or folders
find . ! -path './ignore_path/*' 
</code></pre><h2 id="sed-command">sed command</h2>
<p><code>sed</code> command is used to find and replaces words inside files:</p>
<pre><code>#usage
sed [options] &lt;file&gt;

#replace all occurrences of word1 with word2 in file.txt
sed -i 's/word1/word2/g' file.txt

# -i replaces the word1 occurrences inside the file, otherwise the result of replacing will be just output to terminal without affecting the file itself
# 's/' option is to replace
# '/g' replaces all words inside a line, otherwise the sed command only replaces the first occurrence of each line inside the file
</code></pre><h2 id="using-the-two-commands-together">Using the two commands together</h2>
<p>These two commands can be used together in multiple ways, it can be used for example pipes or <code>xargs</code> but in this article we will do things in other way. <code>find</code> command has the option <code>-exec</code> to run commands for each result it encounters. We can use <code>find</code> with <code>sed</code> in the following way to replace all occurrences of <code>word1</code> for <code>word2</code> in all files from current directory and sub directories:</p>
<pre><code>find . -type f -exec sed -i '/s/word1/word2/g' {} +
</code></pre><h2 id="real-example">Real example</h2>
<p>Now I am going to give a real example of one modification I needed to do in a NodeJS project. In this project I needed to replace the word <code>__model</code> for <code>_model</code> in all files. It should be noted that in this case the <code>node_modules</code> and <code>.git</code> folders should be ignored, so I ran this command:</p>
<pre><code>find . -type f ! -path './node_modules/*' ! -path '.git/*' -exec sed -i 's/__model/_model/g' {} +
</code></pre>
     
</body>
</html>

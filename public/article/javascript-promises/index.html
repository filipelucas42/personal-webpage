<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <link rel="stylesheet" href="/new.css">
     <script async src="https://www.googletagmanager.com/gtag/js?id=UA-161652863-2"></script>
     <script>
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());

          gtag('config', 'UA-161652863-2');
     </script>
	 <title>Javascript Promises</title>
</head>
<body>
     <head>
    <nav>
         <a href="/">Articles</a>
         /
         <a href="/about">About</a>
    </nav>
</head>
		 <h1 id="javascript-promises">Javascript Promises</h1>
<p>Javascript is an asynchronous language, this means that contrary to most of the languages the instructions do not run sequentially in some cases.</p>
<p>The code above shows an example of asynchronous Javascript execution:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#66d9ef">let</span> <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

<span style="color:#a6e22e">setTimeout</span>(()=&gt;{
    <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
}, <span style="color:#ae81ff">10</span>);


<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>(<span style="color:#a6e22e">test</span>);
<span style="color:#75715e">// Output: 0
</span></code></pre></div><p>Because of the asynchronous behaviour the output is <em>0</em> instead of <em>10</em>, in a synchronous execution it was expected to the <em>setTimeout</em> function wait for 10 milliseconds, change the value <em>test</em> to 10 and then print it on the console. But as you can see if your run the code the <em>console.log</em> function runs before the setTimeout ends.</p>
<p>Another examples of asynchronous behaviour are <em>ajax</em> calls and <em>fetch</em>.</p>
<p>There are some techeniques to get around this asynchronous behaviours like <em>callbacks</em> but in some cases this is not the best aproach.</p>
<p>Another aproach is to use <em>Promise</em>. Above is the code modified to get the synchronous beahviour:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript">
<span style="color:#66d9ef">let</span> <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">timeout</span>(){
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">new</span> Promise((<span style="color:#a6e22e">resolve</span>, <span style="color:#a6e22e">reject</span>)=&gt;{
        <span style="color:#a6e22e">setTimeout</span>(()=&gt;{
            <span style="color:#66d9ef">let</span> <span style="color:#a6e22e">error</span> <span style="color:#f92672">=</span> <span style="color:#66d9ef">false</span>;
            <span style="color:#66d9ef">if</span>(<span style="color:#f92672">!</span><span style="color:#a6e22e">error</span>){
                <span style="color:#a6e22e">test</span> <span style="color:#f92672">=</span> <span style="color:#ae81ff">10</span>;
                <span style="color:#a6e22e">resolve</span>(<span style="color:#a6e22e">test</span>);
            } <span style="color:#66d9ef">else</span> {
                <span style="color:#a6e22e">reject</span>();
            }
        }, <span style="color:#ae81ff">10</span>)
    })
};

<span style="color:#a6e22e">timeout</span>().<span style="color:#a6e22e">then</span>(<span style="color:#a6e22e">console</span>.<span style="color:#a6e22e">log</span>);
<span style="color:#75715e">// Output: 10
</span></code></pre></div><p>As you can see if you run the code now it has synchronous behaviour. It is easy to see that the <em>console.log</em> runs after the <em>timeout</em> function using the method <em>then</em>.</p>
<p>The <em>Promise</em> receives two arguments, <em>resolve</em> and <em>reject</em>, the <em>resolve</em> should be called after the insctructions that are supposed to be executed before the next instrunction, in our case we should call it after the <em>test=10</em> because when this instruction is done the <em>console.log</em> can print it.</p>
<p>The <em>reject</em> should be called if some error occurs and catch it with the <em>catch</em> method.</p>

     
</body>
</html>
